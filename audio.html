<!DOCTYPE html>
<html lang="kk-Cyrl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="site_title">“Æ–ú–Ü–¢ | –ê—É–¥–∏–æ –ü–ª–µ–µ—Ä (–ù–µ–æ–Ω)</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Montserrat:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="style.css"> 

</head>
<body>
    
    <div class="top-nav">
        <button class="icon-btn" onclick="openLanguageModal()"><i class="fas fa-language"></i></button>

        <div class="profile-section">
            <button class="icon-btn" id="profile-btn" onclick="toggleProfileDropdown()">
                <i class="fas fa-user-circle"></i>
            </button>
            
            <div class="profile-dropdown" id="profile-dropdown">
                <a href="#" class="profile-item" id="auth-link" data-key="login_register"><i class="fas fa-sign-in-alt"></i> –ö—ñ—Ä—É / –¢—ñ—Ä–∫–µ–ª—É</a>
                <a href="#" class="profile-item" id="settings-link" style="display:none;" data-key="profile_settings"><i class="fas fa-cog"></i> –ü—Ä–æ—Ñ–∏–ª—å –ù–∞—Å—Ç—Ä–æ–π–∫–∞–ª–∞—Ä—ã</a>
                <a href="#" class="profile-item" id="logout-link" style="display:none;" data-key="logout"><i class="fas fa-sign-out-alt"></i> –®—ã“ì—É</a>
            </div>
        </div>
    </div>

    <div class="container">
        <a href="index.html" class="back-link" data-key="back_link">
            <i class="fas fa-arrow-left"></i> –ê—Ä—Ç“õ–∞ “ö–∞–π—Ç—É (–ù–µ–≥—ñ–∑–≥—ñ –ë–µ—Ç)
        </a>

        <div class="header">
            <h1 data-key="audio_player_title">–ê—É–¥–∏–æ ”®–ª–µ“£–¥–µ—Ä –ü–ª–µ–µ—Ä—ñ</h1>
        </div>
        
        <div class="main-player-card">
            <span class="favorite-btn-main" id="main-favorite-btn" onclick="toggleFavorite()"><i class="far fa-heart"></i></span>
            
            <div class="cover-art"><i class="fas fa-wave-square"></i></div>
            <h2 id="current-track-title" data-key="select_track">–¢—Ä–µ–∫—Ç—ñ —Ç–∞“£–¥–∞“£—ã–∑</h2>
            
            <audio id="global-audio-player" src="" preload="metadata"></audio>
            
            <div class="progress-container">
                <span id="current-time" class="time-display">0:00</span>
                <input type="range" id="progress-bar" value="0" min="0" max="100" step="0.1">
                <span id="duration" class="time-display">0:00</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="skipTime(-10)"><i class="fas fa-backward"></i></button>
                <button class="control-btn main-play" id="main-play-btn" onclick="togglePlay()">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" onclick="skipTime(10)"><i class="fas fa-forward"></i></button>
            </div>
        </div>
        
        <div class="playlist">
            <p class="playlist-title" data-key="playlist_title">”®–ª–µ“£–¥–µ—Ä –¢—ñ–∑—ñ–º—ñ:</p>

            <div class="search-container">
                <input type="text" id="playlist-search" data-key="search_placeholder" placeholder="”®–ª–µ“£ –∞—Ç–∞—É—ã–Ω —ñ–∑–¥–µ—É..." onkeyup="filterPlaylist()">
                <i class="fas fa-search search-icon"></i>
            </div>
            
            <div class="playlist-item" data-index="0">
                <div class="item-info">
                    <i class="fas fa-music"></i>
                    <span data-key="track1_title">1. –û—Ä—Ç–∞ –∂“Ø–∑</span>
                </div>
                <div class="item-actions">
                    <span class="item-duration">0:00</span>
                </div>
            </div>
            
            <div class="playlist-item" data-index="1">
                <div class="item-info">
                    <i class="fas fa-music"></i>
                    <span data-key="track2_title">2. –ñ–∞—Ä—ã–ª“ì–∞–ø –±–∞—Ç—ã—Ä</span>
                </div>
                <div class="item-actions">
                    <span class="item-duration">0:00</span>
                    <button class="lyrics-toggle-btn" data-lyrics-index="1" data-key="lyrics_btn" onclick="toggleLyrics(this)">–ú”ô—Ç—ñ–Ω</button>
                </div>
                <div class="lyrics-content" id="lyrics-1" 
                    data-lang-kk-cyrl="
                    “ö–∞–∑–∞“õ—Ç—ã“£ “±–ª—ã –∞—Ç—ã ‚Äì “ö–∞—Ä–∞–∫–µ–µ—Ä–µ–π “±—Ä–∞–Ω—ã,
                    –ñ–æ“£“ì–∞—Ä —à–∞–ø“õ—ã–Ω—à—ã–ª—ã“ì—ã–Ω–¥–∞ —Ç–∞—Å“õ–∞ –±–∞—Å“õ–∞–Ω –º“±—Ä–∞–Ω—ã.
                    –ö”©–∫–∂–∞–ª–¥–∞–π ”©—Ä—à—ñ–ª —Ä—É—Ö—Ç—ã, –µ—Å—ñ–º—ñ ‚Äì –ñ–∞—Ä—ã–ª“ì–∞–ø,
                    “ö—ã—Ä—ã“õ –∂–æ—Ä—ã“õ, “õ–∞–Ω–¥—ã “±—Ä—ã—Å ‚Äì —Ç–∞—Ä–∏—Ö—ã–Ω–¥–∞ –∞“£—ã–∑ –±–æ–ø “õ–∞–ª“ì–∞–Ω.
                    
                    –ë“±“õ–∞—Ä –∂—ã—Ä–∞—É —Ç–æ–ª“ì–∞“ì–∞–Ω: '–ö–µ—Ä–Ω–µ–π–¥–µ ‚Äì –ñ–∞—Ä—ã–ª“ì–∞–ø!'
                    –¢—É “±—Å—Ç–∞“ì–∞–Ω –±–∞—Ç—ã—Ä –¥–µ–ø, “õ–∞—Ç–∞—Ä—ã–Ω–∞–Ω “õ–∞–ª–¥—ã—Ä–º–∞“ì–∞–Ω –±–∞“ì–∞–ª–∞–ø.
                    “ö–∞–±–∞–Ω–±–∞–π, –ë”©–≥–µ–Ω–±–∞–π–º–µ–Ω –±—ñ—Ä–≥–µ “õ–∞–Ω—ã–Ω —Ç”©–∫–∫–µ–Ω,
                    “ö–∞—Å –±–∞—Ç—ã—Ä–¥—ã“£ “õ–∞–¥—ñ—Ä—ñ–Ω “ö–∞–∑–∞“õ –µ–ª—ñ —Å–µ–ø–∫–µ–Ω.
                    ... (–¢–æ–ª—ã“õ –º”ô—Ç—ñ–Ω –æ—Å—ã –∂–µ—Ä–¥–µ)
                    <p class='author-sign'>~ “ö–∞–±—ã–∫–µ–Ω–æ–≤ –°–∞“ì—ã–Ω—ã—à</p>"
                    data-lang-ru="
                    –í–µ–ª–∏–∫–æ–µ –∏–º—è –∫–∞–∑–∞—Ö–∞ ‚Äì –∑–Ω–∞–º—è –ö–∞—Ä–∞–∫–µ–µ—è,
                    –ù–∞—Å–ª–µ–¥–∏–µ, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –≤ –∫–∞–º–Ω–µ –≤–æ –≤—Ä–µ–º—è –î–∂—É–Ω–≥–∞—Ä—Å–∫–æ–≥–æ –Ω–∞—à–µ—Å—Ç–≤–∏—è.
                    –° –≤–æ–ª—á—å–∏–º –¥—É—Ö–æ–º, –∏–º—è –µ–º—É ‚Äì –ñ–∞—Ä—ã–ª–≥–∞–ø,
                    –°–æ—Ä–æ–∫ –ø–æ—Ö–æ–¥–æ–≤, –∫—Ä–æ–≤–∞–≤–∞—è –±–∏—Ç–≤–∞ ‚Äì –ª–µ–≥–µ–Ω–¥–∞ –µ–≥–æ –∏—Å—Ç–æ—Ä–∏–∏.
                    
                    –ë—É—Ö–∞—Ä –∂—ã—Ä–∞—É –≤–æ—Å–ø–µ–≤–∞–ª: '–ù–∞ —Ç—Ä—É–±–µ ‚Äì –ñ–∞—Ä—ã–ª–≥–∞–ø!'
                    –û—Ü–µ–Ω–∏–≤–∞—è –µ–≥–æ –∫–∞–∫ –∑–Ω–∞–º–µ–Ω–æ—Å—Ü–∞-–±–∞—Ç—ã—Ä–∞.
                    –û–Ω –ø—Ä–æ–ª–∏–≤–∞–ª –∫—Ä–æ–≤—å –≤–º–µ—Å—Ç–µ —Å –ö–∞–±–∞–Ω–±–∞–µ–º –∏ –ë–æ–≥–µ–Ω–±–∞–µ–º,
                    –ö–∞–∑–∞—Ö—Å–∫–∏–π –Ω–∞—Ä–æ–¥ —Ü–µ–Ω–∏–ª —ç—Ç–æ–≥–æ —Ö—Ä–∞–±—Ä–æ–≥–æ –±–∞—Ç—ã—Ä–∞.
                    ... (–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ —Ä—É—Å—Å–∫–∏–π)
                    <p class='author-sign'>~ –ö–∞–±—ã–∫–µ–Ω–æ–≤ –°–∞–≥—ã–Ω—ã—à</p>">
                    </div>
            </div>
            
            <div class="playlist-item" data-index="2">
                <div class="item-info">
                    <i class="fas fa-music"></i>
                    <span data-key="track3_title">3. –¢–µ–≥—ñ–º–Ω—ñ“£ —Ä—É—Ö—ã</span>
                </div>
                <div class="item-actions">
                    <span class="item-duration">0:00</span>
                    <button class="lyrics-toggle-btn" data-lyrics-index="2" data-key="lyrics_btn" onclick="toggleLyrics(this)">–ú”ô—Ç—ñ–Ω</button>
                </div>
                <div class="lyrics-content" id="lyrics-2" 
                    data-lang-kk-cyrl="
                    “ö–∞–∑–∞“õ–ø—ã–∑, —Ç–∞–º—ã—Ä—ã–º—ã–∑ ‚Äì –ê–ª–∞—à—Ç–∞–Ω –Ω”ô—Ä –∞–ª“ì–∞–Ω,
                    “Æ—à –∂“Ø–∑–≥–µ –±”©–ª—ñ–Ω–≥–µ–Ω “±–ª—ã –¥–∞–ª–∞–º, —Å–∞—Ä—ã –∞–ª“õ–∞–º.
                    –ú–µ–Ω—ñ“£ —Ç–µ–≥—ñ–º ‚Äì –û—Ä—Ç–∞ –∂“Ø–∑, –∞–π–±—ã–Ω–¥—ã –Ω–∞–π–∑–∞—Å—ã,
                    –ñ–∞—Ä“õ –µ—Ç–∫–µ–Ω –∂–∞–ª—ã–Ω–¥—ã –∂“Ø—Ä–µ–∫, “õ–∞–∑–∞“õ—Ç—ã“£ –¥–∞—Ä–∞ “±–ª—ã!
                    “∞—Ä–∞–Ω—ã–º ‚Äì “ö–∞–ø—Ç–∞“ì–∞–π, —Ç”©–±–µ–º–¥–µ —Ç“±—Ä“ì–∞–Ω —Ç—É,
                    –ú–µ–Ω –ù–∞–π–º–∞–Ω “ö–∞—Ä–∞–∫–µ—Ä–µ–π, —Ç–µ–≥—ñ–º–¥—ñ —Ç–∞–Ω—ã–ø “±“ì—É.
                    ... (–¢–æ–ª—ã“õ –º”ô—Ç—ñ–Ω –æ—Å—ã –∂–µ—Ä–¥–µ)
                    <p class='author-sign'>~ “ö–∞–±—ã–∫–µ–Ω–æ–≤ –°–∞“ì—ã–Ω—ã—à</p>"
                    data-lang-ru="
                    –ú—ã –∫–∞–∑–∞—Ö–∏, –Ω–∞—à–∏ –∫–æ—Ä–Ω–∏ –≤–∑—è–ª–∏ –Ω–∞—á–∞–ª–æ –æ—Ç –ê–ª–∞—à–∞,
                    –í–µ–ª–∏–∫–∞—è —Å—Ç–µ–ø—å, –ø–æ–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ —Ç—Ä–∏ –∂—É–∑–∞.
                    –ú–æ–π —Ä–æ–¥ ‚Äì –°—Ä–µ–¥–Ω–∏–π –∂—É–∑, —Å–ª–∞–≤–Ω–æ–µ –∫–æ–ø—å–µ,
                    –°–µ—Ä–¥—Ü–µ, –ø—ã–ª–∞—é—â–µ–µ –æ–≥–Ω–µ–º, –æ—Å–æ–±–µ–Ω–Ω—ã–π —Å—ã–Ω –∫–∞–∑–∞—Ö–æ–≤!
                    –ú–æ–π –∫–ª–∏—á ‚Äì –ö–∞–ø—Ç–∞–≥–∞–π, –∑–Ω–∞–º—è –Ω–∞–¥ –º–æ–µ–π –≥–æ–ª–æ–≤–æ–π,
                    –Ø –ù–∞–π–º–∞–Ω –ö–∞—Ä–∞–∫–µ—Ä–µ–π, —è –∑–Ω–∞—é —Å–≤–æ–π —Ä–æ–¥.
                    ... (–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ —Ä—É—Å—Å–∫–∏–π)
                    <p class='author-sign'>~ –ö–∞–±—ã–∫–µ–Ω–æ–≤ –°–∞–≥—ã–Ω—ã—à</p>">
                    </div>
            </div>
        </div>

    </div>

    <div class="modal-overlay" id="language-modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeLanguageModal()">&times;</span>
            <h3 data-key="select_language">–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞—É / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫</h3>
            <div id="lang-options-container">
                <div class="lang-option selected" data-lang="kk-Cyrl">
                    <i class="fas fa-font"></i> “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ (–ö–∏—Ä–∏–ª–ª)
                </div>
                <div class="lang-option" data-lang="ru">
                    <i class="fas fa-globe"></i> –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===================================================
        // üåê –¢–Ü–õ –ê–£–î–ê–†–ú–ê–°–´ (LOCALIZATION)
        // ===================================================

        const translations = {
            'kk-Cyrl': {
                site_title: '“Æ–ú–Ü–¢ | –ê—É–¥–∏–æ –ü–ª–µ–µ—Ä (–ù–µ–æ–Ω)', back_link: '–ê—Ä—Ç“õ–∞ “ö–∞–π—Ç—É (–ù–µ–≥—ñ–∑–≥—ñ –ë–µ—Ç)', audio_player_title: '–ê—É–¥–∏–æ ”®–ª–µ“£–¥–µ—Ä –ü–ª–µ–µ—Ä—ñ',
                select_track: '–¢—Ä–µ–∫—Ç—ñ —Ç–∞“£–¥–∞“£—ã–∑', playlist_title: '”®–ª–µ“£–¥–µ—Ä –¢—ñ–∑—ñ–º—ñ:', search_placeholder: '”®–ª–µ“£ –∞—Ç–∞—É—ã–Ω —ñ–∑–¥–µ—É...',
                lyrics_btn: '–ú”ô—Ç—ñ–Ω', lyrics_close: '–ñ–∞–±—É',
                login_register: '–ö—ñ—Ä—É / –¢—ñ—Ä–∫–µ–ª—É', profile_settings: '–ü—Ä–æ—Ñ–∏–ª—å –ù–∞—Å—Ç—Ä–æ–π–∫–∞–ª–∞—Ä—ã', logout: '–®—ã“ì—É',
                track1_title: '1. –û—Ä—Ç–∞ –∂“Ø–∑', track2_title: '2. –ñ–∞—Ä—ã–ª“ì–∞–ø –±–∞—Ç—ã—Ä', track3_title: '3. –¢–µ–≥—ñ–º–Ω—ñ“£ —Ä—É—Ö—ã',
                select_language: '–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞—É / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫'
            },
            'ru': {
                site_title: '√öMIT | –ê—É–¥–∏–æ –ü–ª–µ–µ—Ä (–ù–µ–æ–Ω)', back_link: '–í–µ—Ä–Ω—É—Ç—å—Å—è –ù–∞–∑–∞–¥ (–ì–ª–∞–≤–Ω–∞—è)', audio_player_title: '–ü–ª–µ–µ—Ä –ê—É–¥–∏–æ –ü–µ—Å–µ–Ω',
                select_track: '–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫', playlist_title: '–°–ø–∏—Å–æ–∫ –ü–µ—Å–µ–Ω:', search_placeholder: '–ü–æ–∏—Å–∫ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Å–Ω–∏...',
                lyrics_btn: '–¢–µ–∫—Å—Ç', lyrics_close: '–ó–∞–∫—Ä—ã—Ç—å',
                login_register: '–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è', profile_settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è', logout: '–í—ã—Ö–æ–¥',
                track1_title: '1. –°—Ä–µ–¥–Ω–∏–π –∂—É–∑', track2_title: '2. –ñ–∞—Ä—ã–ª–≥–∞–ø –±–∞—Ç—ã—Ä', track3_title: '3. –î—É—Ö –º–æ–µ–≥–æ —Ä–æ–¥–∞',
                select_language: '–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞—É / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫'
            }
        };

        function translatePage(lang) {
            const currentLang = translations[lang];
            if (!currentLang) return;

            // 1. –ë–∞—Ä–ª—ã“õ –º”ô—Ç—ñ–Ω–¥—ñ–∫ —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ –∞—É–¥–∞—Ä—É
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (currentLang[key]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = currentLang[key];
                    } else {
                        el.textContent = currentLang[key];
                    }
                }
            });

            // 2. Title-–¥—ñ –∞—É–¥–∞—Ä—É
            document.title = currentLang['site_title'] || document.title;
            
            // 3. ”®–ª–µ“£ –º”ô—Ç—ñ–Ω–¥–µ—Ä—ñ–Ω –∞—É–¥–∞—Ä—É –∂”ô–Ω–µ –∂“Ø–∫—Ç–µ—É
            document.querySelectorAll('.lyrics-content').forEach(lyricDiv => {
                const langData = lyricDiv.getAttribute(`data-lang-${lang.toLowerCase()}`);
                if (langData) {
                    // HTML-–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –±–∞—Å—Ç–∞–ø“õ—ã —Ç–µ–≥—Ç–µ—Ä–¥—ñ –∞–ª—ã–ø —Ç–∞—Å—Ç–∞–ø, <p> —Ç–µ–≥—ñ–º–µ–Ω –∞—É—ã—Å—Ç—ã—Ä–∞–º—ã–∑.
                    lyricDiv.innerHTML = `<p>${langData.replace(/<p class='author-sign'>/g, '</p><p class="author-sign">')}</p>`;
                }
            });
            
            // 4. –ú”ô—Ç—ñ–Ω —Ç“Ø–π–º–µ–ª–µ—Ä—ñ–Ω –∂–∞“£–∞—Ä—Ç—É
            document.querySelectorAll('.lyrics-toggle-btn').forEach(btn => {
                const isOpened = btn.nextElementSibling && btn.nextElementSibling.classList.contains('open');
                btn.textContent = isOpened ? currentLang['lyrics_close'] : currentLang['lyrics_btn'];
            });

            // 5. –¢—ñ–ª–¥—ñ —Å–∞“õ—Ç–∞—É
            localStorage.setItem('selectedLang', lang);
            document.documentElement.lang = lang;
            
            // 6. –ë–∞—Å—Ç—ã –±–µ—Ç–∫–µ “õ–∞–π—Ç—É —Å—ñ–ª—Ç–µ–º–µ—Å—ñ–Ω –∂–∞“£–∞—Ä—Ç—É
            const backLink = document.querySelector('.back-link');
            if(backLink) {
                backLink.href = `index.html?lang=${lang}`;
            }

            console.log(`–¢—ñ–ª ${lang} –±–æ–ª—ã–ø –∞—É—ã—Å—Ç—ã—Ä—ã–ª–¥—ã.`);
        }
        
        // ===================================================
        // –ñ–ê–õ–ü–´ –§–£–ù–ö–¶–ò–Ø–õ–ê–† (–ü—Ä–æ—Ñ–∏–ª—å, –ú–æ–¥–∞–ª—å)
        // ===================================================
        
        const profileDropdown = document.getElementById('profile-dropdown');
        const langModal = document.getElementById('language-modal');

        function toggleProfileDropdown() {
            profileDropdown.classList.toggle('open');
        }

        function openLanguageModal() {
            const currentLang = localStorage.getItem('selectedLang') || 'kk-Cyrl';
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.getAttribute('data-lang') === currentLang) {
                    opt.classList.add('selected');
                }
            });
            langModal.style.display = 'flex';
        }

        function closeLanguageModal() {
            langModal.style.display = 'none';
        }

        // –¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞—É –ª–æ–≥–∏–∫–∞—Å—ã
        document.getElementById('lang-options-container').addEventListener('click', function(e) {
            const option = e.target.closest('.lang-option');
            if (option) {
                const lang = option.getAttribute('data-lang');
                translatePage(lang);
                
                document.querySelectorAll('.lang-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                
                closeLanguageModal();
            }
        });

        // –ö—ñ—Ä—É/–®—ã“ì—É –ª–æ–≥–∏–∫–∞—Å—ã (–í–∏–∑—É–∞–ª–¥—ã) - –ë“±—Ä—ã–Ω“ì—ã–¥–∞–π —Å–∞“õ—Ç–∞–ª“ì–∞–Ω
        const authLink = document.getElementById('auth-link');
        const settingsLink = document.getElementById('settings-link');
        const logoutLink = document.getElementById('logout-link');
        
        authLink.onclick = function(e) {
            e.preventDefault();
            authLink.style.display = 'none';
            settingsLink.style.display = 'block';
            logoutLink.style.display = 'block';
            toggleProfileDropdown(); 
        }

        logoutLink.onclick = function(e) {
            e.preventDefault();
            authLink.style.display = 'block';
            settingsLink.style.display = 'none';
            logoutLink.style.display = 'none';
            toggleProfileDropdown(); 
        }

        document.addEventListener('click', function(event) {
            if (!event.target.closest('.profile-section') && profileDropdown.classList.contains('open')) {
                profileDropdown.classList.remove('open');
            }
        });
        
        // ===================================================
        // üéß –ê–£–î–ò–û –ü–õ–ï–ï–† –§–£–ù–ö–¶–ò–Ø–õ–ê–†–´
        // ===================================================

        const audioPlayer = document.getElementById('global-audio-player');
        const playBtn = document.getElementById('main-play-btn');
        const playIcon = playBtn.querySelector('i');
        const playlistItems = document.querySelectorAll('.playlist-item');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeDisplay = document.getElementById('current-time');
        const durationDisplay = document.getElementById('duration');
        const trackTitleDisplay = document.getElementById('current-track-title');
        let currentTrackIndex = -1;
        
        const tracks = [
            { titleKey: "track1_title", src: "orta_juz_audio.mp3" }, 
            { titleKey: "track2_title", src: "jarylgap_batyr_audio.mp3" }, 
            { titleKey: "track3_title", src: "tegimnin_ruhy_audio.mp3" } 
        ];
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function updateProgressStyle(percent) {
            progressBar.style.background = `linear-gradient(to right, var(--secondary-neon) ${percent}%, rgba(255, 255, 255, 0.1) ${percent}%)`;
        }

        function loadTrack(index) {
            if (index < 0 || index >= tracks.length) return;

            if (index === currentTrackIndex) {
                togglePlay();
                return;
            }

            currentTrackIndex = index;
            const track = tracks[index];
            
            const currentLangCode = localStorage.getItem('selectedLang') || 'kk-Cyrl';
            trackTitleDisplay.textContent = translations[currentLangCode][track.titleKey];
            
            audioPlayer.src = track.src;
            audioPlayer.load();

            playlistItems.forEach(item => item.classList.remove('playing'));
            playlistItems[index].classList.add('playing');

            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    playIcon.className = 'fas fa-pause';
                }).catch(error => {
                    playIcon.className = 'fas fa-play';
                });
            }
        }

        function togglePlay() {
            if (currentTrackIndex === -1) {
                loadTrack(0);
                return;
            }
            
            if (audioPlayer.paused) {
                audioPlayer.play();
                playIcon.className = 'fas fa-pause';
            } else {
                audioPlayer.pause();
                playIcon.className = 'fas fa-play';
            }
        }

        function skipTime(time) {
            audioPlayer.currentTime += time;
        }

        playlistItems.forEach((item, index) => {
            item.addEventListener('click', (e) => {
                if (e.target.classList.contains('lyrics-toggle-btn')) {
                    return;
                }
                loadTrack(index);
            });
        });

        audioPlayer.addEventListener('loadedmetadata', () => {
            durationDisplay.textContent = formatTime(audioPlayer.duration);
            progressBar.max = audioPlayer.duration;
            
            if (currentTrackIndex !== -1) {
                playlistItems[currentTrackIndex].querySelector('.item-duration').textContent = durationDisplay.textContent;
            }
        });

        audioPlayer.addEventListener('timeupdate', () => {
            const currentTime = audioPlayer.currentTime;
            const duration = audioPlayer.duration;
            
            progressBar.value = currentTime;
            currentTimeDisplay.textContent = formatTime(currentTime);

            const progressPercent = (currentTime / duration) * 100;
            updateProgressStyle(progressPercent);
        });

        audioPlayer.addEventListener('ended', () => {
            const nextIndex = (currentTrackIndex + 1) % tracks.length; 
            loadTrack(nextIndex);
        });

        progressBar.addEventListener('change', () => {
            audioPlayer.currentTime = progressBar.value;
        });

        function filterPlaylist() {
            const searchInput = document.getElementById('playlist-search').value.toLowerCase();
            
            playlistItems.forEach(item => {
                const titleElement = item.querySelector('.item-info span');
                if (titleElement) {
                    const title = titleElement.textContent.toLowerCase();
                    
                    if (title.includes(searchInput)) {
                        item.classList.remove('hidden'); 
                    } else {
                        item.classList.add('hidden'); 
                    }
                }
            });
        }

        function toggleLyrics(button) {
            const currentLang = localStorage.getItem('selectedLang') || 'kk-Cyrl';
            const lyricsContent = button.nextElementSibling;
            
            if (!lyricsContent) return;

            document.querySelectorAll('.lyrics-content').forEach(content => {
                const otherBtn = content.previousElementSibling.querySelector('.lyrics-toggle-btn');
                if (content !== lyricsContent && content.classList.contains('open')) {
                    content.classList.remove('open');
                    if (otherBtn) otherBtn.textContent = translations[currentLang]['lyrics_btn'];
                }
            });

            lyricsContent.classList.toggle('open');
            
            if (lyricsContent.classList.contains('open')) {
                button.textContent = translations[currentLang]['lyrics_close'];
            } else {
                button.textContent = translations[currentLang]['lyrics_btn'];
            }
        }
        
        function toggleFavorite() {
            const favBtn = document.getElementById('main-favorite-btn').querySelector('i');
            if (favBtn.classList.contains('far')) {
                favBtn.classList.remove('far');
                favBtn.classList.add('fas');
                favBtn.style.color = 'var(--secondary-neon)';
            } else {
                favBtn.classList.remove('fas');
                favBtn.classList.add('far');
                favBtn.style.color = 'var(--light-text)'; 
            }
        }
        
        // –ë–∞—Å—Ç–∞–ø“õ—ã –∂“Ø–∫—Ç–µ—É –∫–µ–∑—ñ–Ω–¥–µ —Ç—ñ–ª–¥—ñ “õ–æ–ª–¥–∞–Ω—É
        window.onload = function() {
            // URL-–¥–µ–Ω —Ç—ñ–ª–¥—ñ –∞–ª—É
            const urlParams = new URLSearchParams(window.location.search);
            const urlLang = urlParams.get('lang');
            // –°–∞“õ—Ç–∞–ª“ì–∞–Ω –Ω–µ–º–µ—Å–µ ”ô–¥–µ–ø–∫—ñ —Ç—ñ–ª–¥—ñ –∞–ª—É
            const savedLang = localStorage.getItem('selectedLang') || 'kk-Cyrl';
            
            const initialLang = urlLang || savedLang;
            
            translatePage(initialLang);
        }
    </script>

</body>
</html>